# [ARC070D] HonestOrUnkind

## 题意

一共有 $n$ 个人，已知其中有 $A$ 个老实人，以及另外 $B=n-A$ 个嘴子，他们互相知道彼此的身份，但是你并不知道，你可以进行如下询问：

向 $x$ 询问 $y$ 是否是老实人。

- 若 $x$ 是老实人，则会根据事实回答 `Y` 或者 `N` 表示 $y$ 是否是老实人。

- 若 $x$ 是嘴子，则会任意返回 `Y` 或 `N`，嘴子们之间可以指定策略来回答你的询问。

你需要在 $2n$ 次询问内确定每个人的身份，或者报告不可能。

## 题解

首先，如果 $A\le B$，那么无解。因为嘴子可以内部选出 $A$ 个人去假扮老实人，这样这 $A$ 个假老实人与真老实人完全对称，玩家无论如何都不可能分辨。

不难找到一个思路：用 $n$ 步找到一个老实人，再让这个人逐个询问其它人。

考察一次询问 $x,y$：

- 如果回答为 `N` 则 $x,y$ 中至少有一个嘴子。

- 如果回答为 `Y` 则 $x,y$ 要么都是老实人，要么都是嘴子。

因为 $A>B$，老实人一定更多，那么可以考虑使用摩尔投票法：

令 $i:1\to n$，同时维护一个栈，每次询问栈顶和 $i$，如果回答 `N`，那么 $i$ 和栈顶都扔掉，否则把 $i$ 放入栈中。

若老实人和嘴子相邻，那么一定同时被扔掉，又因为老实人比嘴子多，最后的栈里剩下的一定是老实人。